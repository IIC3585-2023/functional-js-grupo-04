<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Text transformation - G4</title>

    <!-- lodash library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.min.js"></script>

    <script src="main.js"></script>
    <link rel="stylesheet" href="index.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />

    <script>
      function uploadFile() {
        let file = document.getElementById("file").files[0];
        let reader = new FileReader();
        reader.onload = function (e) {
          let text = e.target.result;
          let result = document.getElementById("text");
          result.value = text;
        };
        reader.readAsText(file);
      }

      function downloadFile() {
        let text = document.getElementById("result").value;
        let element = document.createElement("a");
        element.setAttribute(
          "href",
          "data:text/plain;charset=utf-8," + encodeURIComponent(text)
        );
        element.setAttribute("download", "result.txt");
        element.style.display = "none";
        document.body.appendChild(element);
        element.click();
        document.body.removeChild(element);
      }

      const optionClick = (clicked_button) => {
        const input_n = document.getElementById(clicked_button.id + "-n");
        if (clicked_button.classList.contains("option-button-active")) {
          clicked_button.classList.remove("option-button-active");
          input_n.disabled = true;
          input_n.style.backgroundColor = "#a2a2a2";
        } else {
          clicked_button.classList.add("option-button-active");
          input_n.disabled = false;
          input_n.style.backgroundColor = "whitesmoke";
        }
      };
    </script>
  </head>
  <body>
    <h2>Text transformation - Group 4</h2>
    <input
      type="file"
      id="file"
      name="file"
      accept=".txt"
      onchange="uploadFile()"
    />
    <textarea
      id="text"
      class="text-area"
      spellcheck="false"
      placeholder="Enter text here"
    >
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Donec a diam lectus. Sed sit amet ipsum mauris. Maecenas congue ligula ac quam viverra nec consectetur ante hendrerit.
Donec et mollis dolor. Praesent et diam eget libero egestas mattis sit amet vitae augue.
Nam tincidunt congue enim, ut porta lorem lacinia consectetur.
Donec ut libero sed arcu vehicula ultricies a non tortor.</textarea
    >
    <div class="formatter-options-container">
      <div class="option-button-container">
        <button
          id="add-spaces-followed-dot"
          class="option-button"
          onclick="optionClick(this)"
        >
          Add spaces followed dot
        </button>
        <input
          type="number"
          id="add-spaces-followed-dot-n"
          class="option-button-n"
          min="1"
          value="1"
          disabled
        />
      </div>
      <div class="option-button-container">
        <button
          id="add-lines-separate-dot"
          class="option-button"
          onclick="optionClick(this)"
        >
          Add lines separate dot
        </button>
        <input
          type="number"
          id="add-lines-separate-dot-n"
          class="option-button-n"
          min="0"
          value="0"
          disabled
        />
      </div>
      <div class="option-button-container">
        <button
          id="add-max-width"
          class="option-button"
          onclick="optionClick(this)"
        >
          Add max width
        </button>
        <input
          type="number"
          id="add-max-width-n"
          class="option-button-n"
          min="1"
          value="1"
          disabled
        />
      </div>
      <div class="option-button-container">
        <button
          id="add-identation"
          class="option-button"
          onclick="optionClick(this)"
        >
          Add identation
        </button>
        <input
          type="number"
          id="add-identation-n"
          class="option-button-n"
          min="1"
          value="1"
          disabled
        />
      </div>
      <div class="option-button-container">
        <button
          id="ignore-short-paragraphs"
          class="option-button"
          onclick="optionClick(this)"
        >
          Ignore short paragraphs
        </button>
        <input
          type="number"
          id="ignore-short-paragraphs-n"
          class="option-button-n"
          min="1"
          value="1"
          disabled
        />
      </div>
      <div class="option-button-container">
        <button
          id="ignore-long-paragraphs"
          class="option-button"
          onclick="optionClick(this)"
        >
          Ignore long paragraphs
        </button>
        <input
          type="number"
          id="ignore-long-paragraphs-n"
          class="option-button-n"
          min="1"
          value="1"
          disabled
        />
      </div>
      <div class="option-button-container">
        <button
          id="each-line-paragraph"
          class="option-button"
          onclick="optionClick(this)"
        >
          Each line is a new paragraph
        </button>
        <input
          type="number"
          id="each-line-paragraph-n"
          class="option-button-n"
          min="1"
          value="1"
          disabled
        />
      </div>
      <div class="option-button-container">
        <button
          id="only-first-phrases-each-paragraph"
          class="option-button"
          onclick="optionClick(this)"
        >
          Only the first phrases for each paragraph
        </button>
        <input
          type="number"
          id="only-first-phrases-each-paragraph-n"
          class="option-button-n"
          min="1"
          value="1"
          disabled
        />
      </div>
    </div>
    <div class="n-transform-container">
      <button class="btn" onclick="buttonClick()">Transform</button>
    </div>
    <textarea
      id="result"
      class="text-area"
      spellcheck="false"
      placeholder="Result"
      readonly
    ></textarea>

    <button class="btn" onclick="downloadFile()">Download Result</button>
  </body>
</html>
